<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Independence Day 2025 ‚Äì Ravi Animation</title>
  <style>
    :root{
      --saffron:#FF9933; --white:#FFFFFF; --green:#138808; --navy:#000080;
      --bg:#0b0f17; --accent:#00e7ff; --gold:#ffcc33;
      --glass: rgba(255,255,255,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#070b12;color:#eaf2ff;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;}
    body{overflow:hidden}
    /* animated aurora background */
    .wrap::before{content:"";position:absolute;inset:-20% -30%;background:radial-gradient(40% 60% at 20% 20%,rgba(255,153,51,.18),transparent 60%),radial-gradient(35% 55% at 80% 30%,rgba(19,136,8,.16),transparent 60%),radial-gradient(50% 70% at 50% 80%,rgba(0,231,255,.14),transparent 65%);filter:blur(40px);animation:aurora 18s linear infinite;}
    @keyframes aurora{0%{transform:translate3d(0,0,0) rotate(0deg)}50%{transform:translate3d(2%, -1%,0) rotate(180deg)}100%{transform:translate3d(0,0,0) rotate(360deg)}}
    .wrap{position:relative;height:100%;overflow:hidden}

    /* Top HUD-style header */
    .hud{position:absolute;inset:0 0 auto 0;display:flex;align-items:center;justify-content:space-between;padding:10px 14px;pointer-events:none}
    .glass{position:absolute;left:6%;top:8%;right:6%;height:120px;background:rgba(255,255,255,.06);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.08);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .badge{display:inline-flex;gap:8px;align-items:center;font-weight:700;letter-spacing:.5px;opacity:.95}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px var(--accent),0 0 20px var(--accent)}
    .clock{font-variant-numeric:tabular-nums;opacity:.85}

    /* Center title */
    .title{position:absolute;left:50%;top:12%;transform:translateX(-50%);text-align:center}
    .title h1{margin:0;font-size:clamp(22px,6vw,48px);line-height:1.05;letter-spacing:.5px}
    .tricolor{background:linear-gradient(90deg,var(--saffron),var(--white),var(--green));-webkit-background-clip:text;background-clip:text;color:transparent;filter:drop-shadow(0 2px 10px rgba(255,255,255,.15))}
    .subtitle{margin-top:6px;font-size:clamp(12px,3.2vw,16px);opacity:.9}
    .panel{position:absolute;left:6%;bottom:15%;width:min(70vw,420px);padding:14px;border-radius:22px;background:rgba(255,255,255,.06);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.08);box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .panel h3{margin:0 0 6px 0;font-size:14px;opacity:.9}
    .panel .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .panel label{font-size:12px;opacity:.9}
    .panel input[type=range]{appearance:none;width:120px}
    .eq{width:80px;height:26px;border-radius:8px;background:rgba(255,255,255,.05);}
    .btn{appearance:none;border:0;outline:0;padding:10px 14px;border-radius:14px;background:rgba(255,255,255,.06);backdrop-filter:blur(6px);color:#eaf2ff;font-weight:600;letter-spacing:.3px;box-shadow:0 6px 20px rgba(0,0,0,.35);cursor:pointer}
    .btn:active{transform:translateY(1px)}

    /* Control bar */
    .controls{position:absolute;left:50%;bottom:12px;transform:translateX(-50%);display:flex;gap:10px}

    /* Ground and shadow */
    .ground{position:absolute;left:-2%;right:-2%;bottom:-10px;height:24%;background:linear-gradient(180deg,rgba(255,255,255,0) 0%,rgba(8,12,18,.5) 45%, rgba(8,12,18,.85) 100%);}

    /* Flag container */
    .flag{position:absolute;right:10px;bottom:18%;width:min(38vw,180px);aspect-ratio:3/2;filter:drop-shadow(0 6px 16px rgba(0,0,0,.6));}
    .flag canvas{width:100%;height:100%;display:block;border-radius:8px}

    /* Hero image (user photo) */
    .hero{position:absolute;left:8%;bottom:18%;width:min(26vw,130px);aspect-ratio:3/5;border-radius:18px;overflow:hidden}
    .hero img{width:100%;height:100%;display:block;object-fit:cover;object-position:50% 25%;border-radius:18px;box-shadow:0 0 0 3px rgba(255,255,255,.08),0 10px 22px rgba(0,0,0,.6),0 0 40px rgba(255,153,51,.22),0 0 60px rgba(19,136,8,.18)}

    /* Canvas layer for particles & fireworks */
    #fx{position:absolute;inset:0;}

    /* Toast message */
    .toast{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(1);padding:14px 16px;border-radius:14px;background:rgba(255,255,255,.07);backdrop-filter:blur(8px);box-shadow:0 10px 35px rgba(0,0,0,.5);display:none;font-weight:600}
    .toast.show{display:inline-block;animation:pop .5s ease}
    @keyframes pop{from{transform:translate(-50%,-50%) scale(.85);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}

    /* Helper: hidden on very small height to keep UI clean */
    @media (max-height:520px){.title{top:6%}.subtitle{display:none}.flag{bottom:22%}.hero{bottom:22%}}
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <canvas id="fx"></canvas>

    <div class="hud">
      <div class="badge"><span class="dot"></span><span>INDIA ‚Ä¢ 79th Independence Day</span></div>
      <div class="clock" id="clock">15 Aug 2025</div>
    </div>

    <div class="title">
      <h1 class="tricolor">15 August 2025</h1>
      <div class="subtitle">Victory for the Nation ‚Ä¢ Code_Ravi</div>
    </div>

    <!-- Hero: your photo goes here -->
    <div class="hero" aria-label="Your photo">
      <img id="heroImg" alt="Hero Photo" src="" />
    </div>

    <!-- Indian flag (drawn on its own canvas to allow waving effect) -->
    <div class="flag" aria-label="Indian flag">
      <canvas id="flag"></canvas>
    </div>

    <div class="ground"></div>

    <div class="controls">
      <button class="btn" id="playBtn">‚ñ∂Ô∏è Play (8s)</button>
      <button class="btn" id="soundBtn" aria-pressed="false">üîà Sound</button>
      <canvas class="eq" id="eq"></canvas>
      <button class="btn" id="uploadBtn">üñºÔ∏è Upload Photo</button>
      <button class="btn" id="saveBtn">‚¨áÔ∏è Download Poster</button>
      <input type="file" id="photoPicker" accept="image/*" hidden />
    </div>

     <!-- Pro controls panel 
    <div class="panel" id="panel">
      <h3>Photo Tuning</h3>
      <div class="row">
        <label>Brightness <input type="range" id="bright" min="70" max="130" value="100"></label>
        <label>Contrast <input type="range" id="contrast" min="80" max="140" value="110"></label>
        <label>Blur <input type="range" id="blur" min="0" max="4" value="0"></label>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
    </div>
    -->
    

    <div class="toast" id="toast">Jai Hind! INDIA</div>
  </div>

  <script>
    // ---------- Clock (static with local date string) ----------
    (function(){
      const el = document.getElementById('clock');
      const d = new Date('2025-08-15T00:00:00');
      el.textContent = d.toLocaleDateString(undefined,{day:'2-digit',month:'short',year:'numeric'});
    })();

    // ---------- Canvas Setup ----------
    const fx = document.getElementById('fx');
    const ctx = fx.getContext('2d');
    let W = fx.width = innerWidth * devicePixelRatio;
    let H = fx.height = innerHeight * devicePixelRatio;
    fx.style.width = innerWidth + 'px';
    fx.style.height = innerHeight + 'px';

    addEventListener('resize', ()=>{
      W = fx.width = innerWidth * devicePixelRatio;
      H = fx.height = innerHeight * devicePixelRatio;
      fx.style.width = innerWidth + 'px';
      fx.style.height = innerHeight + 'px';
    });

    // ---------- Particles & Fireworks ----------
    const TAU = Math.PI * 2;
    const palette = ['#FF9933','#FFFFFF','#138808','#00e7ff','#ffcc33'];
    const gravity = 0.08 * devicePixelRatio;
    const air = 0.997;

    class Particle {
      constructor(x,y,sp,dir,life,size,color){
        this.x=x;this.y=y;this.vx=Math.cos(dir)*sp;this.vy=Math.sin(dir)*sp;this.life=life;this.max=life;this.size=size;this.color=color;this.tw=0;
      }
      step(){
        this.vx*=air; this.vy=this.vy*air + gravity; this.x+=this.vx; this.y+=this.vy; this.life--; this.tw+=.03;
      }
      draw(){
        const t = this.life/this.max; // fade
        ctx.globalAlpha = Math.max(0,t);
        ctx.beginPath();
        ctx.arc(this.x,this.y,Math.max(0.5,this.size*t),0,TAU);
        ctx.fillStyle = this.color;
        ctx.fill();
        // trailing glow
        ctx.globalAlpha = Math.max(0,t*.4);
        ctx.fillRect(this.x-0.5,this.y-0.5,1,1);
        ctx.globalAlpha = 1;
      }
    }

    class Rocket {
      constructor(){
        const startX = (Math.random()*0.8+0.1) * W;
        this.x = startX; this.y = H*0.9;
        const targetY = H*(Math.random()*0.35+0.18);
        const up = - (Math.random()*4+5) * devicePixelRatio;
        this.vx = (Math.random()-.5)*1.2*devicePixelRatio;
        this.vy = up; this.alive = true; this.targetY=targetY;
        this.trail=[]; this.color = palette[Math.floor(Math.random()*palette.length)];
      }
      step(){
        if(!this.alive) return;
        this.x+=this.vx; this.y+=this.vy; this.vy+=0.03*devicePixelRatio;
        this.trail.push([this.x,this.y]); if(this.trail.length>12) this.trail.shift();
        if(this.vy>0 || this.y<=this.targetY){ this.burst(); this.alive=false; }
      }
      draw(){
        ctx.strokeStyle=this.color; ctx.globalAlpha=.8; ctx.beginPath();
        for(let i=0;i<this.trail.length-1;i++){const a=this.trail[i],b=this.trail[i+1];ctx.moveTo(a[0],a[1]);ctx.lineTo(b[0],b[1]);}
        ctx.stroke(); ctx.globalAlpha=1;
      }
      burst(){
        const n = 70 + Math.floor(Math.random()*60);
        for(let i=0;i<n;i++){
          const dir = Math.random()*TAU;
          const sp = (Math.random()*4+2) * devicePixelRatio * (1+Math.random());
          const life = 55 + Math.floor(Math.random()*30);
          const size = Math.random()*2.2 + .8;
          const color = palette[(i%3===0)?0:(i%3===1)?2:1]; // mostly tricolor
          particles.push(new Particle(this.x,this.y,sp,dir,life,size,color));
        }
        // Chakra sparkle (navy) ring
        for(let i=0;i<24;i++){
          const a = (i/24)*TAU, sp = 3*devicePixelRatio;
          particles.push(new Particle(this.x,this.y,sp,a,45,1.5,'#000080'));
        }
      }
    }

    let rockets=[], particles=[], running=false, startTime=0;

    function spawnFireworks(){
      if(!running) return;
      if(rockets.length<2+Math.random()*2){ rockets.push(new Rocket()); }
      // Tricolor ambient confetti near ground
      for(let i=0;i<3;i++){
        const x = Math.random()*W, y = H*(.75+Math.random()*.2);
        const dir = -Math.PI/2 + (Math.random()-.5)*.6;
        const sp = (Math.random()*1.5+.4)*devicePixelRatio;
        particles.push(new Particle(x,y,sp,dir,60,1.2,palette[i%3]));
      }
    }

    function loop(t){
      ctx.clearRect(0,0,W,H);
      // faint grid / scanlines for gaming vibe
      ctx.globalAlpha=.08; ctx.fillStyle='#ffffff';
      for(let y=0;y<H;y+=4) ctx.fillRect(0,y,W,1);
      ctx.globalAlpha=1;

      spawnFireworks();

      rockets.forEach(r=>{r.step(); r.draw();});
      rockets = rockets.filter(r=>r.alive);

      particles.forEach(p=>{p.step(); p.draw();});
      particles = particles.filter(p=>p.life>0 && p.y<H+40);

      if(running && performance.now()-startTime>8000){
        running=false; showToast();
      }
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);

    // ---------- Flag drawing with gentle wave ----------
    const flagCanvas = document.getElementById('flag');
    const fctx = flagCanvas.getContext('2d');
    function sizeFlag(){
      const b = flagCanvas.parentElement.getBoundingClientRect();
      flagCanvas.width = Math.floor(b.width * devicePixelRatio);
      flagCanvas.height = Math.floor(b.height * devicePixelRatio);
    }
    sizeFlag();
    addEventListener('resize', sizeFlag);

    function drawFlag(t){
      const w = flagCanvas.width, h = flagCanvas.height;
      fctx.clearRect(0,0,w,h);
      // wave parameters
      const amp = h*0.03, freq = 2*Math.PI/(w*0.9);
      const stripes = [ {c:'#FF9933',y:0}, {c:'#FFFFFF',y:h/3}, {c:'#138808',y:2*h/3} ];
      stripes.forEach(s=>{
        fctx.fillStyle=s.c; fctx.beginPath();
        for(let x=0;x<=w;x++){
          const y = s.y + Math.sin((x*freq)+t*0.003 + s.y*0.01)*amp;
          if(x===0) fctx.moveTo(x,y); else fctx.lineTo(x,y);
        }
        for(let x=w;x>=0;x--){
          const y = s.y + (h/3) + Math.sin((x*freq)+t*0.003 + (s.y+h/3)*0.01)*amp;
          fctx.lineTo(x,y);
        }
        fctx.closePath(); fctx.fill();
      });
      // Ashoka Chakra
      const R = Math.min(w,h)*0.17; const cx = w*0.5, cy = h*0.5;
      fctx.strokeStyle = '#000080'; fctx.lineWidth = Math.max(1, R*0.08);
      fctx.beginPath(); fctx.arc(cx,cy,R,0,TAU); fctx.stroke();
      fctx.lineWidth = Math.max(1, R*0.04);
      for(let i=0;i<24;i++){
        const a = (i/24)*TAU + t*0.004; // slow spin
        fctx.beginPath(); fctx.moveTo(cx,cy);
        fctx.lineTo(cx+Math.cos(a)*R, cy+Math.sin(a)*R);
        fctx.stroke();
      }
      requestAnimationFrame(drawFlag);
    }
    requestAnimationFrame(drawFlag);

    // ---------- Controls & UI elements ----------
    const playBtn = document.getElementById('playBtn');
    const soundBtn = document.getElementById('soundBtn');
    const uploadBtn = document.getElementById('uploadBtn');
    const saveBtn = document.getElementById('saveBtn');
    const picker = document.getElementById('photoPicker');
    const heroImg = document.getElementById('heroImg');
    const bright = document.getElementById('bright');
    const contrast = document.getElementById('contrast');
    const blur = document.getElementById('blur');
    const resetBtn = document.getElementById('resetBtn');
    const eq = document.getElementById('eq');
    const eqctx = eq.getContext('2d');

    // ---------- Tiny WebAudio melody (no external files) ----------
    let audioCtx=null, gain=null, analyser=null; let soundOn=false;
    function initAudio(){
      if(audioCtx) return; audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      gain = audioCtx.createGain(); gain.gain.value=.08; // a bit louder
      analyser = audioCtx.createAnalyser(); analyser.fftSize = 64;
      gain.connect(analyser); analyser.connect(audioCtx.destination);
    }
    function beep(freq, dur){
      if(!audioCtx) return; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='sine'; o.frequency.value=freq; o.connect(g); g.connect(gain);
      const now = audioCtx.currentTime; g.gain.setValueAtTime(.0001, now); g.gain.linearRampToValueAtTime(.28, now+.02); g.gain.exponentialRampToValueAtTime(.001, now+dur);
      o.start(); o.stop(now+dur+0.02);
    }
    function playTheme(){
      if(!audioCtx||!soundOn) return;
      const notes = [261.63,293.66,329.63,349.23,392.00,440.00,392.00,349.23,329.63,293.66,261.63];
      notes.forEach((f,i)=> setTimeout(()=>beep(f,0.18), i*180));
    }

    playBtn.addEventListener('click', ()=>{
      if(!audioCtx) initAudio(); // ensure audio allowed after user gesture
      running = true; startTime = performance.now();
      rockets.push(new Rocket()); rockets.push(new Rocket());
      if(soundOn) playTheme();
    });

    soundBtn.addEventListener('click',()=>{
      if(!audioCtx) initAudio(); soundOn=!soundOn; soundBtn.setAttribute('aria-pressed', String(soundOn));
      soundBtn.textContent = soundOn? 'üîä Sound On' : 'üîà Sound';
      if(soundOn) playTheme();
    });

    function showToast(){
      const t = document.getElementById('toast'); t.classList.add('show');
      setTimeout(()=>t.classList.remove('show'), 1400);
      if(soundOn) playTheme();
    }

    // ---------- Photo upload handling ----------
    uploadBtn.addEventListener('click', ()=> picker.click());
    picker.addEventListener('change', (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      heroImg.src = url;
      showToast();
    });

    // ---------- Filters ----------
      function applyFilters(){
      const b=bright.value, c=contrast.value, bl=blur.value;
      heroImg.style.filter = `brightness(${b}%) contrast(${c}%) blur(${bl}px)`;
    }
    [bright,contrast,blur].forEach(el=> el.addEventListener('input', applyFilters));
    resetBtn.addEventListener('click',()=>{bright.value=100;contrast.value=110;blur.value=0;applyFilters();});
    applyFilters();

    // ---------- Equalizer drawing ----------
    function drawEQ(){
      const w=eq.width=eq.clientWidth*devicePixelRatio, h=eq.height=eq.clientHeight*devicePixelRatio;
      eqctx.clearRect(0,0,w,h);
      if(!analyser||!soundOn){ requestAnimationFrame(drawEQ); return; }
      const arr=new Uint8Array(analyser.frequencyBinCount); analyser.getByteFrequencyData(arr);
      const bars=12, step=Math.max(1,Math.floor(arr.length/bars)); const barW=w/(bars*1.2);
      for(let i=0;i<bars;i++){
        const v=arr[i*step]/255; const bh=v*h*0.9; const x=i*(barW*1.2)+4;
        eqctx.globalAlpha=.85; eqctx.fillStyle='#eaf2ff'; eqctx.fillRect(x,h-bh,barW,bh);
      }
      requestAnimationFrame(drawEQ);
    }
    requestAnimationFrame(drawEQ);

    // ---------- Poster Download (1080x1920) ----------
    function drawFlagInto(ctx,x,y,w,h,t){
      ctx.save(); ctx.translate(x,y); const fctx=ctx; const TAU=Math.PI*2;
      const amp=h*0.03, freq=2*Math.PI/(w*0.9);
      const stripes=[{c:'#FF9933',y:0},{c:'#FFFFFF',y:h/3},{c:'#138808',y:2*h/3}];
      stripes.forEach(s=>{ fctx.fillStyle=s.c; fctx.beginPath();
        for(let X=0;X<=w;X++){ const Y = s.y + Math.sin((X*freq)+t*0.003 + s.y*0.01)*amp; if(X===0) fctx.moveTo(X,Y); else fctx.lineTo(X,Y); }
        for(let X=w;X>=0;X--){ const Y = s.y + (h/3) + Math.sin((X*freq)+t*0.003 + (s.y+h/3)*0.01)*amp; fctx.lineTo(X,Y);} fctx.closePath(); fctx.fill();
      });
      const R=Math.min(w,h)*0.17, cx=w*0.5, cy=h*0.5; fctx.strokeStyle='#000080'; fctx.lineWidth=Math.max(1,R*0.08);
      fctx.beginPath(); fctx.arc(cx,cy,R,0,Math.PI*2); fctx.stroke(); fctx.lineWidth=Math.max(1,R*0.04);
      for(let i=0;i<24;i++){ const a=(i/24)*Math.PI*2 + t*0.004; fctx.beginPath(); fctx.moveTo(cx,cy); fctx.lineTo(cx+Math.cos(a)*R, cy+Math.sin(a)*R); fctx.stroke(); }
      ctx.restore();
    }

    function generatePoster(){
      const W=1080,H=1920; const c=document.createElement('canvas'); c.width=W; c.height=H; const g=c.getContext('2d');
      // bg
      const grd=g.createLinearGradient(0,0,0,H); grd.addColorStop(0,'#0b0f17'); grd.addColorStop(1,'#05070c'); g.fillStyle=grd; g.fillRect(0,0,W,H);
      // aurora spots
      g.globalAlpha=.5; g.fillStyle='rgba(255,153,51,.18)'; g.beginPath(); g.arc(200,300,260,0,Math.PI*2); g.fill(); g.fillStyle='rgba(19,136,8,.16)'; g.beginPath(); g.arc(880,420,230,0,Math.PI*2); g.fill(); g.globalAlpha=1;
      // title
      g.fillStyle='#ffffff'; g.font='bold 64px Inter, Arial'; g.textAlign='center'; g.fillText('15 August 2025', W/2, 150);
      // flag card
      drawFlagInto(g, W-420, 360, 320, 220, performance.now());
      // hero image
      if(heroImg && heroImg.src){
        try{
          const x=120,y=400,w=420,h=650,r=36; g.save(); g.beginPath(); g.moveTo(x+r,y); g.arcTo(x+w,y,x+w,y+h,r); g.arcTo(x+w,y+h,x,y+h,r); g.arcTo(x,y+h,x,y,r); g.arcTo(x,y,x+w,y,r); g.closePath(); g.clip(); g.drawImage(heroImg,x,y,w,h); g.restore();
        }catch(err){console.warn('Could not draw hero image onto poster (image may not be loaded yet):', err);}
      }
      // footer text
      g.globalAlpha=.9; g.font='600 36px Inter, Arial'; g.fillText('Victory for the Nation ‚Ä¢ DAD GAMING', W/2, H-120);
      const url=c.toDataURL('image/png'); const a=document.createElement('a'); a.href=url; a.download='Independence-Day-Poster.png'; a.click();
    }
    saveBtn.addEventListener('click', generatePoster);

    // Optional: autoplay animation once on first load (muted) ‚Äî keep small delay so page finishes layout
    setTimeout(()=>{ try{ playBtn.click(); }catch(e){} }, 400);
  </script>
</body>
</html>
